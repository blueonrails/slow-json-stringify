var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var d=p((L,_)=>{var y=t=>{let e=JSON.stringify(t,(s,n)=>n.isSJS?`${n.type}__sjs`:n),r=JSON.parse(e);return{preparedString:e,preparedSchema:r}};_.exports=y});var f=p((exports,module)=>{var _find=path=>{let{length}=path,str="obj";for(let t=0;t<length;t++)str=str.replace(/^/,"("),str+=` || {}).${path[t]}`;return eval(`((obj) => ${str})`)},_makeArraySerializer=t=>t instanceof Function?e=>{let r="",{length:s}=e;for(let n=0;n<s-1;n++)r+=`${t(e[n])},`;return r+=t(e[s-1]),`[${r}]`}:e=>JSON.stringify(e),TYPES=["number","string","boolean","array","null"],attr=(t,e)=>{if(!TYPES.includes(t))throw new Error(`Expected one of: "number", "string", "boolean", "null". received "${t}" instead`);return{isSJS:!0,type:t,serializer:t==="array"?_makeArraySerializer(e):e||(s=>s)}},defaultRegex=new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm"),escape=(t=defaultRegex)=>e=>e.replace(t,r=>"\\"+r);module.exports={_find,escape,attr}});var g=p((T,m)=>{var{_find:E}=f();m.exports=(t,e)=>{let r=[];return function s(n,o=[]){if(/__sjs/.test(n)){let c=Array.from(o),a=E(c),{serializer:u}=a(e);r.push({serializer:u,find:a,name:o[o.length-1]});return}return Object.keys(n).map(c=>s(n[c],[...o,c]))}(t),r}});var S=p((Y,h)=>{h.exports=(t,e)=>t.replace(/"\w+__sjs"/gm,r=>/string/.test(r)?'"__par__"':"__par__").split("__par__").map((r,s,n)=>{let o=`("${(e[s]||{}).name}":("?))$`,c=`(,?)${o}`,a=/^("}|})/.test(n[s+1]||""),u=new RegExp(a?c:o),i=/^(\"\,|\,|\")/;return{pure:r,prevUndef:r.replace(i,""),isUndef:r.replace(u,""),bothUndef:r.replace(i,"").replace(u,""),nextUndef:r.replace(new RegExp(c),"")}})});var k=p((F,x)=>{var R=t=>(e,r)=>{let s=t[r],n=e[r],o=e[r-1],c=e[r+1];return typeof n!="undefined"?typeof o=="undefined"?s.prevUndef+n:s.pure+n:typeof o=="undefined"?s.bothUndef:typeof c=="undefined"?s.nextUndef:s.isUndef};x.exports=R});var j=d(),v=g(),J=S(),A=k(),{attr:O,escape:P}=f(),z=t=>{let{preparedString:e,preparedSchema:r}=j(t),s=v(r,t),n=J(e,s),o=A(n),{length:c}=s;return a=>{let u="",i=s.map(({serializer:q,find:w})=>q(w(a))),C=[0,0,0],l=0;for(;l!==c;)u+=o(i,l),l+=1;let{flag:U,pure:$,prevUndef:b}=n[n.length-1];return u+(U?b:$)}};module.exports={sjs:z,attr:O,escape:P};
