var f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var g=f((C,d)=>{var k=e=>{let t=JSON.stringify(e,(n,r)=>r.isSJS?`${r.type}__sjs`:r),s=JSON.parse(t);return{preparedString:t,preparedSchema:s}};d.exports=k});var _=f((exports,module)=>{var _find=path=>{let str="obj";for(let e=0;e<path.length;++e)str=`(${str}||{}).${path[e]}`;return eval(`(obj=>${str})`)},_makeArraySerializer=e=>e instanceof Function?t=>{let s="",{length:n}=t;for(let r=0;r<n-1;r++)s+=`${e(t[r])},`;return s+=e(t[n-1]),`[${s}]`}:t=>JSON.stringify(t),TYPES=["number","string","boolean","array","null"],attr=(e,t)=>{if(!TYPES.includes(e))throw new Error(`Expected one of: "number", "string", "boolean", "null". received "${e}" instead`);return{isSJS:!0,type:e,serializer:e==="array"?_makeArraySerializer(t):t||(n=>n)}},defaultRegex=new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm"),escape=(e=defaultRegex)=>t=>t.replace(e,s=>"\\"+s);module.exports={_find,escape,attr}});var h=f((O,m)=>{var{_find:U}=_();m.exports=(e,t)=>{let s=[];return function n(r,p=[]){if(/__sjs/.test(r)){let c=Array.from(p),o=U(c),{serializer:u}=o(t);s.push({serializer:u,find:o,aggregate:a=>u(o(a)),name:p[p.length-1]});return}return Object.keys(r).map(c=>n(r[c],[...p,c]))}(e),s}});var x=f((P,S)=>{S.exports=(e,t)=>{let s=[];return e.replace(/"(\w+)__sjs"/gm,(n,r)=>(s.push(r),/string/.test(n)?'"__par__"':"__par__")).split(/__par__/).map((n,r,p)=>{let c=`("${(t[r]||{}).name}":("?))$`,o=`(,?)${c}`,u=/^("}|})/.test(p[r+1]||""),a=new RegExp(u?o:c),i=/^(\"\,|\,|\")/;return{type:s[r],pure:n,prevUndef:n.replace(i,""),isUndef:n.replace(a,""),bothUndef:n.replace(i,"").replace(a,""),nextUndef:n.replace(new RegExp(o),"")}})}});var $=f((N,y)=>{var q=(e,t)=>{let s,n,r;return(p,c)=>{let o=e[c],u=s,a=r||(s=t[c]?.aggregate(p)),i=n=t[c+1]?.aggregate(p);return typeof a!="undefined"?typeof u=="undefined"?o.prevUndef+a:o.pure+a:typeof u=="undefined"?o.bothUndef:typeof i=="undefined"?o.nextUndef:o.isUndef}};y.exports=q});var w=g(),E=h(),R=x(),b=$(),{attr:v,escape:j}=_(),J=e=>{let{preparedString:t,preparedSchema:s}=w(e),n=E(s,e),r=R(t,n),{pure:p}=r[r.length-1],c=n.map(({serializer:u,find:a},i)=>l=>{let z=u(a(l))}),{length:o}=n;return u=>{let a=b(r,n),i="";for(let l=0;l<=o;l++)i+=a(u,l);return i}};module.exports={sjs:J,attr:v,escape:j};
