var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var g=l((U,h)=>{var E=e=>{let t=JSON.stringify(e,(n,r)=>r.isSJS?`${r.type}__sjs`:r),s=JSON.parse(t);return{preparedString:t,preparedSchema:s}};h.exports=E});var m=l((exports,module)=>{var _find=path=>{let str="obj";for(let e=0;e<path.length;++e)str=`(${str}||{}).${path[e]}`;return console.log(str),eval(`(obj=>${str})`)},_makeArraySerializer=e=>e instanceof Function?t=>{let s="",{length:n}=t;for(let r=0;r<n-1;r++)s+=`${e(t[r])},`;return s+=e(t[n-1]),`[${s}]`}:t=>JSON.stringify(t),TYPES=["number","string","boolean","array","null"],attr=(e,t)=>{if(!TYPES.includes(e))throw new Error(`Expected one of: "number", "string", "boolean", "null". received "${e}" instead`);return{isSJS:!0,type:e,serializer:e==="array"?_makeArraySerializer(t):t||(n=>n)}},defaultRegex=new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm"),escape=(e=defaultRegex)=>t=>t.replace(e,s=>"\\"+s);module.exports={_find,escape,attr}});var x=l((v,S)=>{var{_find:R}=m();S.exports=(e,t)=>{let s=[];return function n(r,c=[]){if(/__sjs/.test(r)){let o=Array.from(c),a=R(o),{serializer:i}=a(t);s.push({serializer:i,find:a,name:c[c.length-1]});return}return Object.keys(r).map(o=>n(r[o],[...c,o]))}(e),s}});var k=l((N,$)=>{$.exports=(e,t)=>{let s=[];return e.replace(/"(\w+)__sjs"/gm,(n,r)=>(s.push(r),/string/.test(n)?'"__par__"':"__par__")).split(/__par__/).map((n,r,c)=>{let o=`("${(t[r]||{}).name}":("?))$`,a=`(,?)${o}`,i=/^("}|})/.test(c[r+1]||""),u=new RegExp(i?a:o),p=/^(\"\,|\,|\")/;return{type:s[r],pure:n,prevUndef:n.replace(p,""),isUndef:n.replace(u,""),bothUndef:n.replace(p,"").replace(u,""),nextUndef:n.replace(new RegExp(a),"")}})}});var w=l((Q,q)=>{var b=e=>(t,s)=>{let n=e[s],r=t[s];return n.pure+r};q.exports=b});var j=g(),y=x(),z=k(),J=w(),{attr:A,escape:C}=m(),O=e=>{let{preparedString:t,preparedSchema:s}=j(e),n=y(s,e),r=z(t,n),c=J(r),{pure:o}=r[r.length-1],a=n.map(({serializer:u,find:p},d)=>_=>{let f=u(p(_))}),{length:i}=n;return u=>{let{serializer:p,find:d}=n[0],_="";for(let f=0;f<i;f++)_+=c([p(d(u))],f);return _+o}};module.exports={sjs:O,attr:A,escape:C};
